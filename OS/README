This is the GNU/Linux Operating system for Red Pitaya, an Open-source
instrument based on Xilinx Zynq.


FILESYSTEM

The operating system consists of the following components:
- BOOT.BIN: U-boot boot loader + initial FPGA image.
- uImage: Linux kernel.
- devicetree.dtb: Linux kernel device tree describing the Xilinx Zynq
                  hardware configuration.
- uramdisk.image.gz: Initial ramdisk, holding the root ext2 filesystem for
                     the GNU/Linux OS. It is based on Busybox, but contains
                     several other pieces of SW like:
                     + Nginx web server
                     + WiFi tools
                     + SSH server
                     

Upon boot, the ramdisk image and the root filesystem resides in RAM.
Although it is writable, its content is lost at next reboot or power cycle.
This way, better OS robustness to abrupt power loss is achieved.

BUILD

These OS components sould have an automated build from the respective
sources and configuration with clear versioning. Until this is established,
these components are staged in the filesystem sub-directory.

The Linux kernel uImage is build from git repository defined by LINUX_GIT build
valiable. By defaulty local (/var/git/linux-xlnx.git) bare repository is used.
This can be changed if remote repository is to be used.
e.g. make clean all LINUX_GIT=git://10.0.1.150/linux-xlnx.git

TOOLS

The tools sub-directory contains the tools to allow for easy manipulation of
the ramdisk content.

Usage (on any Linux system):

> cd filesystem
> ../tools/extract_image.sh uramdisk.image.gz
> sudo mount -t ext2 -o loop ramdisk.img /mnt

Edit files in /mnt, which represents the Linux root filesystem.

> sudo umount /mnt
> ../tools/create_image.sh ramdisk.img



INSTALLATION

Copy the contents of the filesystem sub-directory to the empty first partition 
of the SD card. The SD partiton must be Windows FAT type (vfat - 0xb).
